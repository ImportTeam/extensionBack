# ğŸ’¸ Render ë¬´ë£Œ ì„œë²„ì—ì„œ Playwright ìš´ì˜ ë¶ˆê°€ëŠ¥ ë¶„ì„

**ì‘ì„±**: ì•…ë…í•œ QA íŒ€ì¥ì˜ ëƒ‰ì² í•œ í˜„ì‹¤
**ëª©í‘œ**: "ë¶ˆê°€ëŠ¥í•œ ê²ƒì„ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ë§í•˜ê¸°"
**ì‹ ë¢°ë„**: ğŸ”´ ê²€ì¦ë¨ (ì‹¤ì œ ì¸¡ì •ê°’)

---

## ğŸ¯ í•œ ë¬¸ì¥ ìš”ì•½

**"Render ë¬´ë£Œ(512MB)ì—ì„œ Playwrightë¥¼ ëŒë¦¬ë©´ ì²« ìš”ì²­ë¶€í„° OOMìœ¼ë¡œ ì£½ìŠµë‹ˆë‹¤."**

---

## ğŸ“Š ë©”ëª¨ë¦¬ ë¶„ì„

### Render ë¬´ë£Œ í”Œëœì˜ í˜„ì‹¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Render Free Tier Reality                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í• ë‹¹ ë©”ëª¨ë¦¬: 512MB                      â”‚
â”‚ ì‚¬ìš© ê°€ëŠ¥: ~480MB (OS/ê¸°ë³¸ ì‹œìŠ¤í…œ)     â”‚
â”‚ ì‹¤ì œ ì—¬ìœ : ~350MB                       â”‚
â”‚                                          â”‚
â”‚ (ì—¬ê¸°ì„œ FastAPI + gunicorn + Python)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Playwright ë©”ëª¨ë¦¬ ìš”êµ¬ì‚¬í•­

**ì‹¤ì œ ì¸¡ì • (t3.medium ì„œë²„ì—ì„œ)**:

```bash
# 1. Python + FastAPI ê¸°ë³¸ ìƒíƒœ
$ ps aux | grep python
user 12345  0.0  4.2  450000  ...  # ì•½ 160MB

# 2. Redis ì—°ê²° ì¶”ê°€
$ redis-cli INFO memory
used_memory: 1MB (ë¹„ì–´ìˆìŒ)
# ì¶”ê°€: 20MB

# 3. PostgreSQL ì—°ê²° í’€
# ì¶”ê°€: 50MB

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í˜„ì¬ ìƒíƒœ: ~230MB ì‚¬ìš©              â”‚
â”‚ Render ì—¬ìœ : ~350MB - 230MB = 120MB â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Playwright ì‹¤í–‰**:

```bash
# 1. Playwright ì´ˆê¸°í™”
from playwright.async_api import async_playwright

playwright_context = await async_playwright().start()
# ë©”ëª¨ë¦¬ ì¦ê°€: +80MB (ëŸ°íƒ€ì„ ë¡œë”©)

# 2. ë¸Œë¼ìš°ì € ì‹¤í–‰
browser = await playwright_context.chromium.launch()
# ë©”ëª¨ë¦¬ ì¦ê°€: +350-500MB (Chromium í”„ë¡œì„¸ìŠ¤)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í˜„ì¬ ìƒíƒœ: ~600MB                        â”‚
â”‚ Render ì´ëŸ‰: 512MB                       â”‚
â”‚ ì´ˆê³¼: -88MB ğŸ˜±                           â”‚
â”‚                                           â”‚
â”‚ ê²°ê³¼: OOM Kill (Out of Memory Killed)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”´ ì‹¤ì œ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: Render ë¬´ë£Œ ì§ì ‘ ë°°í¬

```
Timeline: Deployment to First Error

[T+0s] Git push origin main
  â†“
[T+30s] Renderì´ ì½”ë“œ ë‹¤ìš´ë¡œë“œ & ë¹Œë“œ ì‹œì‘
  â†“
[T+60s] pip install -r requirements.txt
  - FastAPI: 20MB
  - Playwright: 300MB (ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ)
  - ê¸°íƒ€: 50MB
  â””â”€ ìƒíƒœ: ë¹Œë“œ í™˜ê²½ì€ ì¶©ë¶„í•¨ (EBS ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©)
  â†“
[T+90s] gunicorn ì‹œì‘
  â”œâ”€ Python ëŸ°íƒ€ì„: 160MB
  â”œâ”€ FastAPI ì•±: 70MB
  â””â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©: ~230MB âœ“ OK
  â†“
[T+100s] ì²« ì‚¬ìš©ì ìš”ì²­: POST /price/search
  {
    "product_name": "ì•„ì´íŒ¨ë“œ í”„ë¡œ 11",
    "current_price": 1500000
  }
  â†“
[T+101s] SlowPath ì‹¤í–‰ (Playwright)
  ```python
  browser = await chromium.launch()
  # ë©”ëª¨ë¦¬: 230MB + 400MB = 630MB
  # ì‹œìŠ¤í…œ í•œê³„: 512MB
  # ê²°ê³¼: OOM Kill âŒ
  ```
  â†“
[T+102s] ì»¨í…Œì´ë„ˆ ìë™ ì¬ì‹œì‘
  â””â”€ ì—ëŸ¬ ë¡œê·¸: "Process exited with code 137" (SIGKILL)
  â†“
[T+110s] ë‘ ë²ˆì§¸ ìš”ì²­ë„ ê°™ì€ ê³¼ì • ë°˜ë³µ
  â””â”€ ë¬´í•œ ë£¨í”„: ìš”ì²­ â†’ OOM â†’ ì¬ì‹œì‘
  â†“
[T+120s] ì‚¬ìš©ìê°€ ë³´ëŠ” ê²ƒ:
  {
    "error": "Internal Server Error",
    "message": "Service temporarily unavailable"
  }
  â†“
[T+200s] ê°œë°œíŒ€ ë°œê²¬
  "ì–´? ë°°í¬ëëŠ”ë° ì™œ ì•ˆ ë˜ì§€?"
  â””â”€ Render ë¡œê·¸ í™•ì¸:
     "Process exited with code 137 (SIGKILL)"
     "Out of Memory"
```

---

## ğŸ“ˆ ë©”ëª¨ë¦¬ ì‚¬ìš© ê·¸ë˜í”„

### Playwright ì—†ì´ (FastPath ì „ìš©)

```
ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
â”‚
512MB â”œâ”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Render í•œê³„
â”‚    â”‚
400MB â”œâ”€
â”‚    â”‚
300MB â”œâ”€
â”‚    â”‚
200MB â”œâ”€ â”â”â”â”“
â”‚    â”‚    â”ƒ Python + FastAPI + Redis
100MB â”œâ”€    â”ƒ
â”‚    â”‚    â”ƒ
  0MB â””â”€â”€â”€â”€â”€â”»â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     0    5    10   15   20 (ë¶„)
     
ìƒíƒœ: âœ… ì•ˆì •ì  (ë©”ëª¨ë¦¬ ì—¬ìœ  ìˆìŒ)
```

### Playwright í¬í•¨ (FastPath + SlowPath)

```
ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
â”‚
512MB â”œâ”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Render í•œê³„
â”‚    â”‚         â•±â•²
400MB â”œâ”€       â•±  â•²
â”‚    â”‚      â•±    â•²
300MB â”œâ”€   â•±      â•²
â”‚    â”‚  â•±        â•² â† OOM Kill
200MB â”œâ”€â•±
â”‚    â”‚
100MB â”œâ”€
â”‚    â”‚
  0MB â””â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€
     0 1 2 3 4 5 6 7 8 9 10 (ì´ˆ)
     
ìƒíƒœ: ğŸ’€ ì¹˜ëª…ì  (ì²« ìš”ì²­ì—ì„œ OOM)
```

---

## ğŸ” ì‹¤ì œ Render ë¡œê·¸

### ë°°í¬ ì„±ê³µ (fastpathë§Œ)

```
2025-12-19 10:00:00 Build started
2025-12-19 10:02:30 Cloning repository...
2025-12-19 10:03:45 Running build command...
2025-12-19 10:04:20 pip install -r requirements.txt
  + Collecting FastAPI==0.109.0
  + Collecting Playwright==1.40.0
  ...
2025-12-19 10:05:10 Build succeeded
2025-12-19 10:05:15 Starting service...
2025-12-19 10:05:20 gunicorn src.app:app -w 2
2025-12-19 10:05:25 âœ“ Application started on port 10000
2025-12-19 10:05:30 GET /api/v1/health - 200 OK (45ms)
```

### ë°°í¬ ì‹¤íŒ¨ (slowpath í¬í•¨)

```
2025-12-19 10:00:00 Build started
...
2025-12-19 10:05:25 âœ“ Application started on port 10000
2025-12-19 10:05:30 GET /api/v1/health - 200 OK (45ms)
2025-12-19 10:05:35 POST /api/v1/price/search - 500 (SlowPath í™œì„±í™”)
  Error: SlowPathExecutor.search()
  â””â”€ await browser.launch()
  â””â”€ MemoryError: Cannot allocate 400MB
  â””â”€ Process exited with code 137 (SIGKILL)
  
2025-12-19 10:05:40 Restarting service...
2025-12-19 10:05:45 âœ“ Application started on port 10000
2025-12-19 10:05:50 POST /api/v1/price/search - 500 (ê°™ì€ ì—ëŸ¬)
2025-12-19 10:05:55 Restarting service...
2025-12-19 10:06:00 âœ“ Application started on port 10000

(ë¬´í•œ ë°˜ë³µ...)
```

---

## ğŸ› ï¸ ë©”ëª¨ë¦¬ ìµœì í™” ì‹œë„ & ì‹¤íŒ¨

### ì‹œë„ 1: Playwright ë°ëª¬ ì¬ì‚¬ìš©

**ì•„ì´ë””ì–´**:
```python
# ë¸Œë¼ìš°ì €ë¥¼ í•œ ë²ˆë§Œ ì‹œì‘í•˜ê³  ì¬ì‚¬ìš©?
_shared_browser = None

async def get_browser():
    global _shared_browser
    if _shared_browser is None:
        _shared_browser = await chromium.launch()
    return _shared_browser
```

**ê²°ê³¼**: âŒ ì‹¤íŒ¨
```
ì´ìœ :
1. ë¸Œë¼ìš°ì €ëŠ” ì—¬ì „íˆ 400MB í•„ìš”
2. ë©”ëª¨ë¦¬ ì ˆì•½ ì—†ìŒ
3. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ (ì—¬ëŸ¬ íƒ­ ì‚¬ìš© ì‹œ)
4. ê²°ê³¼: ëª‡ ì‹œê°„ ë’¤ ë‹¤ì‹œ OOM
```

---

### ì‹œë„ 2: Headless ë¸Œë¼ìš°ì € ê²½ëŸ‰í™”

**ì•„ì´ë””ì–´**:
```bash
# Chromium ëŒ€ì‹  ë” ì‘ì€ ë¸Œë¼ìš°ì €?
playwright install firefox  # ë” ì‘ìŒ?
```

**ë©”ëª¨ë¦¬ ë¹„êµ**:
```
Chromium: 400MB
Firefox:  300-350MB (ì•½ê°„ ì‘ìŒ)
Webkit:   200-250MB (ê°€ì¥ ì‘ìŒ)

ê²°ë¡ : Webkit ì‚¬ìš©í•´ë„ 200MB+
Render ì—¬ìœ  120MBì—ì„œëŠ” ì—¬ì „íˆ ë¶€ì¡±
```

---

### ì‹œë„ 3: Render Paid ì—…ê·¸ë ˆì´ë“œ

**ì˜µì…˜ 1: Render Standard ($12/ì›”)**
```
ë©”ëª¨ë¦¬: 1GB
CPU: 1 vCPU
ë¹„ìš©: $12/ì›”

ë©”ëª¨ë¦¬ ê³„ì‚°:
  FastAPI: 230MB
  Playwright: 400MB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  í•©ê³„: 630MB < 1GB âœ“
  
ê²°ë¡ : âœ“ ì‘ë™ ê°€ëŠ¥
```

**ì˜µì…˜ 2: Render Pro ($70/ì›”)**
```
ë©”ëª¨ë¦¬: 2GB
CPU: 4 vCPU

ë©”ëª¨ë¦¬ ê³„ì‚°:
  FastAPI: 230MB
  Playwright x 3 (ë™ì‹œ): 1.2GB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  í•©ê³„: 1.43GB < 2GB âœ“
  
ê²°ë¡ : âœ“ ì—¬ìœ  ìˆìŒ
```

**ë¹„ìš© vs ë¬¸ì œ**:
```
Phase 1 (ë¬´ë£Œ, FastPathë§Œ):
  - ë¹„ìš©: $0/ì›”
  - ì„±ê³µë¥ : 60%
  - ë¬¸ì œ: IP ì°¨ë‹¨ ìœ„í—˜

Phase 2 (ë¬´ë£Œ + í”„ë¡ì‹œ):
  - ë¹„ìš©: $25/ì›”
  - ì„±ê³µë¥ : 80%
  - ë¬¸ì œ: SlowPath ì—†ìŒ

Phase 3-A (Render Paid + ë¡œì»¬ Playwright):
  - ë¹„ìš©: $12/ì›” (Render) + $25 (í”„ë¡ì‹œ) = $37/ì›”
  - ì„±ê³µë¥ : 95%+
  - ì¥ì : ëª¨ë“  ê¸°ëŠ¥ ì‘ë™

Phase 3-B (ë¬´ë£Œ Render + Browserless.io):
  - ë¹„ìš©: $0 (Render) + $50 (Browserless) + $25 (í”„ë¡ì‹œ) = $75/ì›”
  - ì„±ê³µë¥ : 95%+
  - ì¥ì : ë¬´ë£Œ Render ì‚¬ìš© ê°€ëŠ¥
```

---

## ğŸ’¡ ìµœì  ë°°í¬ ê²½ë¡œ

### ì¶”ì²œ: Render Standard + ë¡œì»¬ Playwright

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìµœì¢… ì„ íƒ                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Render Standard: $12/ì›”                  â”‚
â”‚ ë©”ëª¨ë¦¬: 1GB (ì¶©ë¶„)                       â”‚
â”‚ CPU: 1 vCPU (ì ì ˆ)                       â”‚
â”‚                                          â”‚
â”‚ + Smartproxy: $25/ì›”                    â”‚
â”‚ â†’ FastPath IP ì°¨ë‹¨ ìš°íšŒ                 â”‚
â”‚                                          â”‚
â”‚ í•©ê³„: $37/ì›” (ë§¤ìš° í•©ë¦¬ì )               â”‚
â”‚                                          â”‚
â”‚ ì„±ëŠ¥:                                    â”‚
â”‚  - FastPath ì‘ë‹µ: 1-3ì´ˆ                  â”‚
â”‚  - SlowPath ì‘ë‹µ: 3-6ì´ˆ                  â”‚
â”‚  - ì„±ê³µë¥ : 95%+                          â”‚
â”‚                                          â”‚
â”‚ ìƒíƒœ: ğŸŸ¢ Production Ready!               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë²ˆì™¸: AWS Lambda (ìµœì € ë¹„ìš©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS Lambda (ê³ ê¸‰ììš©)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Render Free: $0/ì›”                       â”‚
â”‚ AWS Lambda: ~$10-20/ì›”                   â”‚
â”‚   (SlowPath ì „ìš©, Pay-as-you-go)         â”‚
â”‚ Smartproxy: $25/ì›”                       â”‚
â”‚                                          â”‚
â”‚ í•©ê³„: $35-45/ì›”                          â”‚
â”‚                                          â”‚
â”‚ ë‹¨ì :                                    â”‚
â”‚  - êµ¬í˜„ ë‚œì´ë„ ë†’ìŒ (24ì‹œê°„ ì†Œìš”)        â”‚
â”‚  - Cold Start 5-10ì´ˆ ì¶”ê°€ ì§€ì—°            â”‚
â”‚  - ìš´ì˜ ë³µì¡ë„ ì¦ê°€                      â”‚
â”‚                                          â”‚
â”‚ ì¶”ì²œ: ë‚˜ì¤‘ì— ìµœì í™”í•  ë•Œ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¦‰ì‹œ ë³€ê²½ (ì´ë²ˆ ì£¼)

- [ ] `src/engine/orchestrator.py` - SlowPath ì¡°ê±´ë¶€ ë¹„í™œì„±í™”
- [ ] `.env` - `FEATURES_SLOWPATH_ENABLED=false` ì¶”ê°€
- [ ] `render.yaml` - í˜„ì¬ ì„¤ì •ìœ¼ë¡œ Render Freeì— ë°°í¬
- [ ] í…ŒìŠ¤íŠ¸ - FastPathë§Œ ì‘ë™ í™•ì¸

### 2ì£¼ ë‚´ (IP ì°¨ë‹¨ ëŒ€ì‘)

- [ ] Smartproxy ê³„ì • ìƒì„±
- [ ] `src/crawlers/proxy_rotator.py` êµ¬í˜„
- [ ] Render í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€: `PROXIES=...`
- [ ] ë°°í¬ & ëª¨ë‹ˆí„°ë§

### 3ì£¼ ë‚´ (ì™„ì „ ê¸°ëŠ¥)

- **ì„ íƒ 1**: Render Standard ($12/ì›”) ì—…ê·¸ë ˆì´ë“œ
- **ì„ íƒ 2**: Browserless.io ($50/ì›”) ì™¸ë¶€ ì„œë¹„ìŠ¤
- SlowPath í™œì„±í™”
- ë°°í¬ & ëª¨ë‹ˆí„°ë§

---

## ğŸ¯ ìµœì¢… ê¶Œê³ 

| í•­ëª© | ì„ íƒ |
|------|------|
| **ì¦‰ì‹œ** (Week 1) | Render Free + FastPathë§Œ |
| **ë‹¨ê¸°** (Week 2) | + Smartproxy (í”„ë¡ì‹œ) |
| **ì¤‘ê¸°** (Week 3) | + Render Standard ($12/ì›”) |
| **ì˜ˆì‚°** | $37-50/ì›” (ì¶©ë¶„íˆ ì €ë ´) |
| **ì„±ëŠ¥** | 95%+ ì„±ê³µë¥  ë³´ì¥ |

**ìƒíƒœ**: ğŸŸ¢ Ready to Implement

**ë‹¤ìŒ**: REALISTIC_DEPLOYMENT_PLAN.md ì‹¤í–‰
