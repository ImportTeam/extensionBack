# ìƒí’ˆëª… ì •ê·œí™” ê·œì¹™ ì •ì˜ì„œ

## 1. ê·œì¹™ ê°œìš”

ì •ê·œí™” ì‹œìŠ¤í…œì€ **ë‹¤ë‚˜ì™€ ê²€ìƒ‰ ì—”ì§„ì´ ì¸ì‹í•˜ê¸° ì‰¬ìš´ í˜•íƒœë¡œ** ì‚¬ìš©ì ì…ë ¥ì„ ë³€í™˜í•©ë‹ˆë‹¤.

### ì„±ê³µ ê¸°ì¤€
- **90% ì´ìƒ** í¬ë¡¤ë§ ì„±ê³µë¥ 
- **ì¼ê´€ì„±** (ë™ì¼ ì…ë ¥ = ë™ì¼ ì¶œë ¥)
- **ì˜ˆì¸¡ ê°€ëŠ¥ì„±** (ê·œì¹™ ê¸°ë°˜)

---

## 2. ê·œì¹™ ë ˆë²¨

### Level 1: Hard Mapping (ìµœìš°ì„ )
**ì–¸ì œ**: ì…ë ¥ì˜ ë¸Œëœë“œ/ì œí’ˆëª…ì´ "í‘œì¤€"ì´ ì•„ë‹ ë•Œ  
**ëª©ì **: ë‹¤ë‚˜ì™€ì—ì„œ ê²€ìƒ‰ ì„±ê³µ í™•ë¥ ì´ ë†’ì€ í‘œì¤€í˜•ìœ¼ë¡œ ê°•ì œ ë³€í™˜  
**ìš°ì„ ìˆœìœ„**:  **ê°€ì¥ ë†’ìŒ**

**ì˜ˆì‹œ**:
```
ì…ë ¥: "ë§¥ë¶ ì—ì–´ 15" â†’ ì¶œë ¥: "Apple ë§¥ë¶ ì—ì–´ 15"
ì…ë ¥: "ê·¸ë¨" â†’ ì¶œë ¥: "LG ê·¸ë¨"
ì…ë ¥: "ê°¤ëŸ­ì‹œë¶" â†’ ì¶œë ¥: "Samsung ê°¤ëŸ­ì‹œë¶"
```

**ê·œì¹™ ë¦¬ìŠ¤íŠ¸** (resources/hard_mapping.json):
```json
{
  "ë§¥ë¶": "Apple ë§¥ë¶",
  "ë§¥ë¶ ì—ì–´": "Apple ë§¥ë¶ ì—ì–´",
  "ë§¥ë¶ í”„ë¡œ": "Apple ë§¥ë¶ í”„ë¡œ",
  "ì•„ì´í°": "Apple ì•„ì´í°",
  "ì—ì–´íŒŸ": "Apple ì—ì–´íŒŸ",
  "ì—ì–´íŒŸ í”„ë¡œ": "Apple ì—ì–´íŒŸ í”„ë¡œ",
  "ì•„ì´íŒ¨ë“œ": "Apple ì•„ì´íŒ¨ë“œ",
  "ê°¤ëŸ­ì‹œ": "Samsung ê°¤ëŸ­ì‹œ",
  "ê°¤ëŸ­ì‹œë¶": "Samsung ê°¤ëŸ­ì‹œë¶",
  "ê°¤ëŸ­ì‹œ ë²„ì¦ˆ": "Samsung ê°¤ëŸ­ì‹œ ë²„ì¦ˆ",
  "ê°¤ëŸ­ì‹œ íƒ­": "Samsung ê°¤ëŸ­ì‹œ íƒ­",
  "ê·¸ë¨": "LG ê·¸ë¨",
  "ìš¸íŠ¸ë¼ë¶": "ASUS ìš¸íŠ¸ë¼ë¶",
  "ë¹„ìŠ¤í¬í¬": "Samsung ë¹„ìŠ¤í¬í¬",
  "ì˜¤ë””ì„¸ì´": "Samsung ì˜¤ë””ì„¸ì´",
  "XPS": "Dell XPS",
  "ë¡œê·¸ì¸": "Logitech ë¡œê·¸ì¸",
  "ì‹ ë¼ë©´ ë¸”ë™": "ë†ì‹¬ ì‹ ë¼ë©´ ë¸”ë™",
  "ë¶ˆë‹­ë³¶ìŒë©´": "ì‚¼ì–‘ ë¶ˆë‹­ë³¶ìŒë©´"
}
```

---

### Level 2: Synonym Substitution (2ì°¨)
**ì–¸ì œ**: Hard Mapping í›„, ë¹„í‘œì¤€ ë™ì˜ì–´ê°€ ìˆì„ ë•Œ  
**ëª©ì **: í”í•œ í‘œê¸° ë³€í˜•ì„ í‘œì¤€í˜•ìœ¼ë¡œ í†µì¼  
**ìš°ì„ ìˆœìœ„**: ğŸŸ¡ **ì¤‘ê°„**

**ì˜ˆì‹œ**:
```
ì…ë ¥: "ë§¥ë¶" (Hard Mapping í›„)
      â†“ Synonym
ì¶œë ¥: "Apple ë§¥ë¶"
      â†“ (ë§Œì•½ "Macbook"ì´ë¼ê³  ì…ë ¥í–ˆë‹¤ë©´)
      "Apple MacBook" â†’ "Apple ë§¥ë¶" (í‘œì¤€í™”)
```

**ê·œì¹™ ë¦¬ìŠ¤íŠ¸** (resources/normalization.synonyms.yaml):
```yaml
# IT ì œí’ˆ
apple:
  - Apple
  - ì• í”Œ
  
macbook:
  - ë§¥ë¶
  - MacBook
  - Mac Book
  - Macbook
  
airpods:
  - ì—ì–´íŒŸ
  - AirPods
  - Air Pods
  - ì—ì–´íŒŸìŠ¤

samsung:
  - Samsung
  - ì‚¼ì„±
  
galaxy:
  - ê°¤ëŸ­ì‹œ
  - Galaxy
  
galaxybook:
  - ê°¤ëŸ­ì‹œë¶
  - Galaxy Book
  - ê°¤ë¶

lg:
  - LG
  - ì—˜ì§€
  
gram:
  - ê·¸ë¨
  - Gram
  - LG Gram

# ìŒì‹
nongshim:
  - ë†ì‹¬
  - ë†ì‹ 
  
ramyeon:
  - ë¼ë©´
  - ë¼ë©´
```

---

### Level 3: IT/ë¹„IT ë¶„ë¥˜ ê¸°ë°˜ ë…¸ì´ì¦ˆ ì œê±°
**ì–¸ì œ**: Synonym ì¹˜í™˜ í›„  
**ëª©ì **: ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë‹¤ë¥¸ ê·œì¹™ ì ìš©  
**ìš°ì„ ìˆœìœ„**: **ë‚®ìŒ (í•˜ì§€ë§Œ í•„ìˆ˜)**

#### 3-1. IT ìƒí’ˆ ì œê±° ê·œì¹™
```
ğŸ—‘ï¸ ì œê±° ëŒ€ìƒ:
- ìš©ëŸ‰ (256GB, 512SSD ë“±)
- CPU (ì¸í…” i5, ë¼ì´ì  , M3 ë“±)
- ë©”ëª¨ë¦¬ (DDR5, 16GB ë“±)
- OS (Windows 11, macOS ë“±)
- ìƒ‰ìƒ (í™”ì´íŠ¸, ë¸”ë™, ì‹¤ë²„ ë“±)
- í¬íŠ¸ (USB-C â†’ í‘œì¤€í™” "C")
- ì•¡ì„¸ì„œë¦¬ (ì¼€ì´ìŠ¤, í•„ë¦„, ê±°ì¹˜ëŒ€ ë“±)
- ê¸°ìˆ  ìš©ì–´ (ë¬´ì„ , ë¸”ë£¨íˆ¬ìŠ¤, ì•¡í‹°ë¸Œë…¸ì´ì¦ˆìº”ìŠ¬ë§ ë“±)

 ë³´ì¡´ ëŒ€ìƒ:
- ë¸Œëœë“œ (Apple, Samsung, LG ë“±)
- ì œí’ˆêµ° (ë§¥ë¶, ì—ì–´íŒŸ, ê·¸ë¨ ë“±)
- ëª¨ë¸ (í”„ë¡œ, ì—ì–´, ê¸°ë³¸)
- ì„¸ëŒ€ (2ì„¸ëŒ€ â†’ "2", Pro Max ë“±)
- ì£¼ìš” ì‹ë³„ì (15ì¸ì¹˜ â†’ í™”ë©´ í¬ê¸°)
```

**ì˜ˆì‹œ**:
```
ì…ë ¥: "Apple ë§¥ë¶ í”„ë¡œ 16ì¸ì¹˜ M4 Max 512GB SSD 36GB ë©”ëª¨ë¦¬ í™”ì´íŠ¸ ì¼€ì´ìŠ¤"
  â†“ (Level 1: Hard Mapping - ì´ë¯¸ Apple ìˆìŒ)
  â†“ (Level 2: Synonym - ë³€í™˜ ì—†ìŒ)
  â†“ (Level 3: IT ë…¸ì´ì¦ˆ ì œê±°)
ì¶œë ¥: "Apple ë§¥ë¶ í”„ë¡œ 16 M4"
```

#### 3-2. ë¹„IT ìƒí’ˆ ì œê±° ê·œì¹™
```
ğŸ—‘ï¸ ì œê±° ëŒ€ìƒ:
- ë°°ì†¡ ì •ë³´ (ë¬´ë£Œë°°ì†¡, ë¹ ë¥¸ë°°ì†¡)
- ìƒíƒœ (ì •í’ˆ, ìƒˆì œí’ˆ, ì¤‘ê³ , ë¦¬í¼)
- íŒë§¤ì²˜ ì •ë³´ (ì¿ íŒ¡, ìœ„ë©”í”„)

 ë³´ì¡´ ëŒ€ìƒ:
- ë¸Œëœë“œ
- ì œí’ˆëª…
- ì£¼ìš” íŠ¹ì„± (ìƒ‰ìƒ, ë§›, ì‚¬ì´ì¦ˆ)
- ëª¨ë¸ ë²ˆí˜¸
```

**ì˜ˆì‹œ**:
```
ì…ë ¥: "ë†ì‹¬ ì‹ ë¼ë©´ ë¸”ë™ ì»µë¼ë©´ 100g ë¬´ë£Œë°°ì†¡ ë¬´ì¡°ê±´ ìµœì €ê°€"
  â†“ (Level 1: Hard Mapping)
ì¶œë ¥: "ë†ì‹¬ ì‹ ë¼ë©´ ë¸”ë™ ì»µë¼ë©´ 100g"
```

---

### Level 4: êµ¬ë¶„ì ì œê±° (Delimiter Removal)
**ì–¸ì œ**: ëª¨ë“  ë ˆë²¨ ì´í›„  
**ëª©ì **: ìƒí’ˆ ìŠ¤í™ì´ êµ¬ë¶„ìë¡œ êµ¬ë¶„ëœ ê²½ìš°, êµ¬ë¶„ì ì´ì „ë§Œ ì¶”ì¶œ  
**ìš°ì„ ìˆœìœ„**: ğŸ”µ **ì„ íƒ (ì´ë¯¸ ë§ì´ ì²˜ë¦¬ë¨)**

**êµ¬ë¶„ì**: `Â·`, `â€¢`, `|`, `-`

**ì˜ˆì‹œ**:
```
ì…ë ¥: "Apple ë§¥ë¶ í”„ë¡œ 16 M4 Â· 512GB Â· 36GB Â· í™”ì´íŠ¸"
  â†“
ì¶œë ¥: "Apple ë§¥ë¶ í”„ë¡œ 16 M4"
```

---

## 3. ê·œì¹™ ì ìš© ìˆœì„œ (Pseudo Code)

```python
def normalize_product_name(raw_input: str) -> str:
    """ì •ê·œí™” ë©”ì¸ í•¨ìˆ˜"""
    
    # 0. ì „ì²˜ë¦¬ (íŠ¹ìˆ˜ë¬¸ì ì •ë¦¬ ë“±)
    cleaned = preprocess(raw_input)
    
    # Level 1: Hard Mapping
    hard_mapped = apply_hard_mapping(cleaned)
    if changed:
        logger.debug(f"Level 1: {cleaned} â†’ {hard_mapped}")
        cleaned = hard_mapped
    
    # Level 2: Synonym Substitution
    synonymed = apply_synonyms(cleaned)
    if changed:
        logger.debug(f"Level 2: {cleaned} â†’ {synonymed}")
        cleaned = synonymed
    
    # Level 3: Category-aware Noise Removal
    is_it = classify_it_or_non_it(cleaned)
    if is_it:
        denoised = remove_it_noise(cleaned)
    else:
        denoised = remove_non_it_noise(cleaned)
    
    logger.debug(f"Level 3 (is_it={is_it}): {cleaned} â†’ {denoised}")
    cleaned = denoised
    
    # Level 4: Delimiter Removal (Optional)
    delimited = remove_after_delimiter(cleaned)
    if changed:
        logger.debug(f"Level 4: {cleaned} â†’ {delimited}")
        cleaned = delimited
    
    # Post-processing: ë‹¤ì¤‘ ê³µë°± ì •ë¦¬
    final = clean_whitespace(cleaned)
    
    logger.info(f"Normalization: '{raw_input}' â†’ '{final}'")
    return final
```

---

## 4. ë¦¬ì†ŒìŠ¤ íŒŒì¼ êµ¬ì¡°

```
resources/
â”œâ”€â”€ hard_mapping.json
â”‚   â””â”€ {"ì…ë ¥": "í‘œì¤€ì¶œë ¥", ...}
â”‚
â”œâ”€â”€ mappings/
â”‚   â””â”€ synonyms.products.yaml
â”‚       â””â”€ ì œí’ˆë³„ ë™ì˜ì–´
â”‚
â””â”€â”€ normalization/
    â”œâ”€ it_product_keywords.yaml
    â”‚   â””â”€ IT ì œí’ˆ ì‹ë³„ ì‹ í˜¸
    â”‚
    â”œâ”€ it_noise_words.yaml
    â”‚   â””â”€ IT ì œê±° ëŒ€ìƒ ë‹¨ì–´
    â”‚
    â””â”€ non_it_noise_words.yaml
        â””â”€ ë¹„IT ì œê±° ëŒ€ìƒ ë‹¨ì–´
```

---

## 5. ì„±ê³µ/ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤

###  ì„±ê³µ ì¼€ì´ìŠ¤

| ì…ë ¥ | ì¶œë ¥ | ë‹¤ë‚˜ì™€ ê²€ìƒ‰ ì„±ê³µ |
|------|------|-----------------|
| "ë§¥ë¶ ì—ì–´ 15" | "Apple ë§¥ë¶ ì—ì–´ 15" | t |
| "ê°¤ëŸ­ì‹œë¶ 360" | "Samsung ê°¤ëŸ­ì‹œë¶ 360" | t |
| "ì—ì–´íŒŸ í”„ë¡œ 2" | "Apple ì—ì–´íŒŸ í”„ë¡œ 2" | t |
| "ì‹ ë¼ë©´ ë¸”ë™" | "ë†ì‹¬ ì‹ ë¼ë©´ ë¸”ë™" | t |
| "ê·¸ë¨ 14" | "LG ê·¸ë¨ 14" | t |

### ì‹¤íŒ¨ ì¼€ì´ìŠ¤ (Fallbackìœ¼ë¡œ ì²˜ë¦¬)

| ì…ë ¥ | 1ì°¨ ê²°ê³¼ | 2ì°¨ ì¿¼ë¦¬ | 3ì°¨ ì¿¼ë¦¬ |
|------|---------|---------|---------|
| "unknown brand X200" | ì‹¤íŒ¨ | "X200" | (Playwright) |
| "ì˜¤íƒ€ ìƒí’ˆëª…" | ì‹¤íŒ¨ | (ë™ì˜ì–´ ìë™ ìƒì„±) | (Playwright) |

---

## 6. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] resources/hard_mapping.json ìƒì„± (ëª¨ë“  ì£¼ìš” ìƒí’ˆ)
- [ ] resources/normalization/it_noise_words.yaml ìƒì„±
- [ ] resources/normalization/non_it_noise_words.yaml ìƒì„±
- [ ] normalize.pyì— hard_mapping ë¡œë“œ ë¡œì§ ì¶”ê°€
- [ ] normalize.pyì— synonym ì ìš© ë¡œì§ ì¶”ê°€
- [ ] normalize.pyì— ë¡œê¹… ê°•í™” (ê° Levelë³„)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (test_text_utils.py)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ (test_live_crawl_real.pyì—ì„œ 90% ê²€ì¦)

---

## 7. ì˜ˆìƒ íš¨ê³¼

```
ê°œì„  ì „:
- Hard Mapping ì—†ìŒ
- ì„±ê³µë¥ : 60-70%

ê°œì„  í›„:
- Level 1: Hard Mapping â†’ 75%
- Level 2: Synonym â†’ 85%
- Level 3: ì •ë°€ ì œê±° â†’ 90%+
```

